# Компилятор для учебного языка программирования

Этот проект представляет собой компилятор для учебного языка программирования, разработанный в рамках курса "Разработка компиляторов".

## Структура проекта

```
.
├── src/
│   ├── core/           # Основные компоненты компилятора
│   │   ├── compiler.c  # Точка входа
│   │   ├── ast.c       # Абстрактное синтаксическое дерево
│   │   └── error.c     # Обработка ошибок
│   ├── lexer/          # Лексический анализатор
│   ├── parser/         # Синтаксический анализатор
│   ├── codegen/        # Генератор кода
│   └── utils/          # Вспомогательные утилиты
├── tests/              # Тесты
├── examples/           # Примеры программ
└── docs/               # Документация
```

## Особенности языка

Учебный язык поддерживает следующие конструкции:

- Объявление переменных: `int`, `string`
- Объявление специальных переменных: `global` (глобальная переменная) и `local` (переменная на уровне блока)
- Операторы: арифметические, сравнения, логические
- Условные конструкции: `if`-`else`
- Циклы: `while` и `for` (для цикла по диапазону)
- Функция печати: `print`

## Сборка проекта

Для сборки проекта требуется:
- GCC компилятор
- Flex (для лексического анализатора)
- Bison (для синтаксического анализатора)

Сборка:
```bash
make
```

Очистка:
```bash
make clean
```

## Использование

```bash
./compiler.exe <input_file> -o <output_file>        # сохранить RISC-V код в файл 
./compiler.exe <input_file> -ast                    # показать AST
./compiler.exe <input_file> -ast-file <output_file> # сохранить AST в файл
```

## Тестирование

Примеры программ находятся в директории `tests/`. Для запуска тестов используйте:
```bash
make test
```

# Язык программирования

## Основные возможности

### Типы данных
- `int` - целочисленный тип
- `string` - строковый тип

### Объявление переменных
```python
int global a = 5;        # глобальная переменная
string global s = "Hello";  # глобальная строка
int local b = 10;        # локальная переменная
```

### Операции
- Арифметические операции:
  - `+` - сложение
  - `-` - вычитание
  - `*` - умножение
  - `/` - деление
  - `%` - остаток от деления

- Операции сравнения:
  - `==` - равно
  - `!=` - не равно
  - `<` - меньше
  - `>` - больше
  - `<=` - меньше или равно
  - `>=` - больше или равно

- Логические операции:
  - `and` - логическое И
  - `or` - логическое ИЛИ

- Строковые операции:
  - `.` - конкатенация строк

### Управляющие конструкции

#### Условный оператор
```python
if (условие) {
    // код
} else {
    // код
}
```

#### Цикл while
```python
while (условие) {
    // код
}
```

#### Цикл for
```python
for переменная from начальное_значение to конечное_значение step шаг {
    // код
}
```

### Ввод-вывод
- `print выражение` - вывод значения выражения

### Комментарии
- Однострочные комментарии: `// комментарий`
- Многострочные комментарии: `/* комментарий */`

### Особенности
- Обязательное указание области видимости переменной (global/local)
- Проверка деления на ноль
- Компиляция в RISC-V код

## Пример программы
```python
int global a = 5;
int global b = 2;

// Арифметические операции
print(a + b);
print(a - b);
print(a * b);
print(a / b);
print(a % b);

// Строковые операции
string global first = "first";
string global firstAndSecond = first . " and second";
print(first);
print(firstAndSecond);

// Условный оператор и циклы
int global i = 6;
int global c = 0;

if (i == 1) {
    c = 1;
}

while (i - 1 > 0) {
    c = c + 1;
    i = i - 1;
}

// Цикл for
for j from 1 to 5 step 1 {
    print(j);
}

print(c);
```
